# webvideo-downloader

![](https://img.shields.io/badge/platform-win%20%7C%20linux%20%7C%20osx-brightgreen) ![](https://img.shields.io/badge/python-%3E=%203.5.0-orange)

ğŸš€ è§†é¢‘ä¸‹è½½å™¨ï¼Œç”¨äºä¸‹è½½ç½‘ç«™ä¸­å¯ä»¥åœ¨çº¿æ’­æ”¾çš„è§†é¢‘ã€‚

---

**ä¸»è¦æ”¯æŒçš„è§†é¢‘ç½‘ç«™ï¼š**

- [å“”å“©å“”å“©](https://www.bilibili.com/)ï¼ˆå•P/å¤šPï¼‰
- [çˆ±å¥‡è‰º](https://www.iqiyi.com/)
- [è…¾è®¯è§†é¢‘](https://v.qq.com/)
- [èŠ’æœTV](https://www.mgtv.com/)
- [WeTV](https://wetv.vip/)
- [æ„›å¥‡è—å°ç£ç«™](https://tw.iqiyi.com/)
- [çˆ±å¥‡è‰ºå›½é™…ç«™](https://www.iq.com/)

æ­¤å¤–ï¼Œå¯é€‰çš„ `CommonHlsDownloader` è„šæœ¬æ”¯æŒç»å¤§éƒ¨åˆ†åŸºäº HLS æµå¼è§†é¢‘çš„ç½‘ç«™ï¼Œå¦‚ [LPLå®˜ç½‘](https://lpl.qq.com/) ç­‰ã€‚

**æ³¨æ„ï¼š** éƒ¨åˆ†ç½‘ç«™ï¼ˆå¦‚ [WeTV](https://wetv.vip/)ï¼Œ[çˆ±å¥‡è‰ºå›½é™…ç«™](https://www.iq.com/)ï¼‰ä¸ºå¤–æŒ‚å­—å¹•æ–‡ä»¶ï¼Œè¯¥ç±»è§†é¢‘ä¸‹è½½åå­—å¹•æ–‡ä»¶å·²å†…ç½®åˆ°è§†é¢‘ä¸­ï¼Œå¯ä½¿ç”¨æ”¯æŒå†…ç½®å­—å¹•çš„æ’­æ”¾å™¨æ’­æ”¾ï¼Œå¦‚ `PotPlayer`ï¼Œ`VLC Player` ç­‰ã€‚

---

**æœ¬é¡¹ç›®æ”¯æŒ1080pè“å…‰ç”»è´¨ã€VIPä¸“äº«ã€VIPç‚¹æ’­ã€ä»˜è´¹è§†é¢‘çš„ä¸‹è½½ï¼Œå‰æä¸ºä½ æ˜¯VIP/ç”¨äº†åˆ¸/ä»˜äº†è´¹ã€‚**

> **What you can watch determined what you can download.**
>
> ä½ åªèƒ½ä¸‹è½½ä½ æˆ–ä½ çš„è´¦å·å¯ä»¥åœ¨çº¿è§‚çœ‹çš„è§†é¢‘ï¼Œæœ¬é¡¹ç›®æ²¡æœ‰VIPç ´è§£åŠŸèƒ½ã€‚



## ğŸ”¨ å¿«é€Ÿå¼€å§‹

æœ¬é¡¹ç›®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ**violentmonkey** è„šæœ¬ç”¨äºåœ¨æµè§ˆå™¨ä¸­æå–è§†é¢‘é“¾æ¥ï¼Œ**downloader** ç¨‹åºè´Ÿè´£è§†é¢‘æ–‡ä»¶çš„ä¸‹è½½ä¸åˆå¹¶ã€‚

### Violentmonkey

1. Chromeæˆ–å…¶ä»–æµè§ˆå™¨å®‰è£… [Violenmonkey](https://violentmonkey.github.io/) æš´åŠ›çŒ´æ’ä»¶ï¼Œæˆ–è€… [Tampermonkey](http://www.tampermonkey.net/) æ’ä»¶

2. å®‰è£… `violentmonkey` ç›®å½•ä¸­çš„ [WebVideoDownloader.user.js](https://github.com/jaysonlong/webvideo-downloader/raw/master/violentmonkey/WebVideoDownloader.user.js) è„šæœ¬ã€‚ç›´æ¥ç‚¹å‡»ä»¥ä¸‹é“¾æ¥å³å¯å®‰è£…

- [æš´åŠ›çŒ´ï¼ˆChromeï¼‰](https://chrome.google.com/webstore/detail/violentmonkey/jinjaccalgkegednnccohejagnlnfdag)
- [WebVideoDownloader è„šæœ¬](https://github.com/jaysonlong/webvideo-downloader/raw/master/violentmonkey/WebVideoDownloader.user.js)
- [å¹¿å‘Šæ‹¦æˆªå™¨](https://chrome.google.com/webstore/detail/adguard-adblocker/bgnkhhnnamicmpeenaelnjfhikgbkllg)ï¼ˆå¯é€‰ã€‚å­˜åœ¨å¹¿å‘Šæ—¶ï¼Œè„šæœ¬**å¯èƒ½**ä¼šå»¶è¿Ÿåˆ°å¹¿å‘Šå³å°†ç»“æŸæ—¶æ‰å¼€å§‹è§£æï¼‰
- [CommonHlsDownloader è„šæœ¬](https://github.com/jaysonlong/webvideo-downloader/raw/master/violentmonkey/CommonHlsDownloader.user.js)ï¼ˆå¯é€‰ã€‚é€šç”¨ HLS ä¸‹è½½è„šæœ¬ï¼Œä½œç”¨äº**æ‰€æœ‰**ä½¿ç”¨ HLS çš„ç½‘ç«™ï¼‰

3. æ‰“å¼€æ”¯æŒçš„è§†é¢‘ç½‘ç«™ï¼Œç‚¹å‡»æŸä¸ªè§†é¢‘

4. ç½‘é¡µè‡ªåŠ¨å¼¹å‡ºä¸‹è½½æŒ‰é’®ï¼Œç‚¹å‡»æ‰“å¼€å¯¹è¯æ¡†ï¼Œç„¶åç‚¹å‡»é“¾æ¥è¿œç¨‹åˆ›å»ºä¸‹è½½ä»»åŠ¡ï¼Œæˆ–å¤åˆ¶é“¾æ¥åæ‰‹åŠ¨ç²˜è´´ä¸‹è½½

   ![bilibili](img/bilibili.gif)

### Downloader

> æœ¬ä¸‹è½½ç¨‹åºä½¿ç”¨ [FFmpeg](https://ffmpeg.org/) ä½œä¸ºè§†é¢‘å¤„ç†å·¥å…·ï¼Œwindows ç‰ˆæœ¬å·²å†…ç½®åˆ°ä»“åº“ï¼Œlinux/mac ä¸‹éœ€è‡ªè¡Œå®‰è£…ã€‚

è¿œç¨‹è°ƒç”¨ä¸‹è½½å™¨ï¼ˆæ”¯æŒå•è§†é¢‘ä¸‹è½½ã€å“”å“©å“”å“©å¤šPä¸‹è½½å’Œ MSE è§†é¢‘æµå¯¼å‡ºï¼‰

```bash
python daemon.py
```

æ‰‹åŠ¨å¤åˆ¶é“¾æ¥ç²˜è´´ï¼ˆæ”¯æŒå•è§†é¢‘ä¸‹è½½ã€å“”å“©å“”å“©å¤šPä¸‹è½½å’Œæœ¬åœ° m3u8 æ–‡ä»¶è§£æä¸‹è½½ï¼‰

```bash
python common.py
```

å¯é€‰å‘½ä»¤è¡Œå‚æ•°

```
usage: daemon.py / common.py [-h] [-s] [-t:h N] [-t:f N] [-f N]

optional arguments:
  -h, --help  show this help message and exit
  -s          if set, will not delete the temp files
  -t:h N      the thread count of hls download, default 16
  -t:f N      the thread count of fragments download, default 16
  -f N        the fragments count of each file, default 0 using the thread
              count
```



## æ›´æ–°æ—¥å¿—

### [v1.6] - 2020-09-12

#### æ–°å¢

- æ”¯æŒçˆ±å¥‡è‰ºå›½é™…ç«™è§†é¢‘ä¸‹è½½
- æ”¯æŒå¤šä¸ªå­—å¹•æ–‡ä»¶é›†æˆåˆ°è§†é¢‘ä¸­

### [v1.5] - 2020-09-01

#### æ–°å¢

- æ”¯æŒ WeTVï¼Œæ„›å¥‡è—å°ç£ç«™è§†é¢‘ä¸‹è½½
- æ”¯æŒéƒ¨åˆ†ç½‘ç«™å­—å¹•æ–‡ä»¶é›†æˆåˆ°è§†é¢‘ä¸­
- ä¸‹è½½æ–‡ä»¶å®Œæ•´æ€§æ£€æŸ¥
- æš´åŠ›çŒ´è„šæœ¬ font-awesome å›¾æ ‡é¢„åŠ è½½

#### å˜æ›´

- MP4 æ–‡ä»¶ moov box å‰ç½®ï¼Œä¾¿äºç½‘ç»œä¼ è¾“

### [v1.4] - 2020-06-30

#### å˜æ›´

- å®ˆæŠ¤æ¨¡å¼è¿è¡Œæ—¶ç«¯å£å¤ç”¨ï¼Œå…¶ç›‘å¬æ¨¡å¼åŒæ—¶æ”¯æŒ HTTP Server å’Œ WebSocket
- æš´åŠ›çŒ´è„šæœ¬å¯è‡ªå®šä¹‰è¿œç¨‹è°ƒç”¨æ¨¡å¼ï¼ˆHTTP æˆ– WebSocketï¼‰

### [v1.3] - 2020-06-27

#### å˜æ›´

- æš´åŠ›çŒ´è„šæœ¬é‡æ„ & UIç•Œé¢é‡å†™

### [v1.2] - 2020-06-18

#### æ–°å¢

- æ”¯æŒçˆ±å¥‡è‰º MPD æ ¼å¼æ–‡ä»¶è§£æ
- æ”¯æŒ MSE è§†é¢‘æµé€šè¿‡ WebSocketå¯¼å‡ºï¼ˆå®éªŒæ€§ï¼‰
- æ–°å¢ä¸¤ä¸ªæš´åŠ›çŒ´è„šæœ¬ï¼šé€šç”¨ hls ä¸‹è½½è„šæœ¬å’Œ MSE è§†é¢‘æµå¯¼å‡ºè„šæœ¬ï¼ˆå®éªŒæ€§ï¼‰
- å‘½ä»¤è¡Œå‚æ•°æ”¯æŒ

#### å˜æ›´

- å®ˆæŠ¤æ¨¡å¼è¿è¡Œæ—¶çš„ç›‘å¬æ¨¡å¼ç”± HTTP Server æ›´æ”¹ä¸º WebSocket 
- å“”å“©å“”å“©å¤šPä¸‹è½½çš„ python è„šæœ¬å¹¶å…¥åˆ°é€šç”¨çš„ python ä¸‹è½½è„šæœ¬ä¸­

### [v1.1] - 2020-05-29

#### æ–°å¢

- æ”¯æŒåŸºäº HTTP Server ä»¥å®ˆæŠ¤æ¨¡å¼è¿è¡Œï¼Œæµè§ˆå™¨ç‚¹å‡»é“¾æ¥ç›´æ¥è°ƒç”¨åå°ä¸‹è½½

#### å˜æ›´

- åˆå¹¶4ä¸ªç½‘ç«™è„šæœ¬ä¸ºå•ä¸ªï¼Œä¾¿äºå®‰è£…å’Œç®¡ç†

### [v1.0] - 2020-05-26

#### æ–°å¢

- æ”¯æŒå“”å“©å“”å“©ã€çˆ±å¥‡è‰ºã€è…¾è®¯è§†é¢‘ã€èŠ’æœTVè§†é¢‘ä¸‹è½½ï¼ˆæ‰‹åŠ¨å¤åˆ¶é“¾æ¥ç²˜è´´ï¼‰
  
[v1.6]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.5...v1.6
[v1.5]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.4...v1.5
[v1.4]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.3...v1.4
[v1.3]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.2...v1.3
[v1.2]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.1...v1.2
[v1.1]: https://github.com/jaysonlong/webvideo-downloader/compare/v1.0...v1.1
[v1.0]: https://github.com/jaysonlong/webvideo-downloader/releases/tag/v1.0
